{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"Jacob Dirks Datasheet as part of  Irrigation Project for  Team 102  <p>Submission: December, 08, 2025 </p><p></p>","tags":["tag1","tag2"]},{"location":"#introduction","title":"Introduction","text":"<ul> <li>This datasheet is for the moisture sensor subsection of the irrigation project. The various pages of this datasheet will walk through some of the design decisions, project criteria, and various project elements to simulate professional documentation.</li> </ul>","tags":["tag1","tag2"]},{"location":"#project-summary","title":"Project Summary","text":"<ul> <li>The goal of the project is to create a system that utilizes communication between individual subsystems to provide a function that makes the life of a homeowner easier. The task Team 102 identified was the sometimes difficult task of remembering to water plants. This was able to be broken up into 4 subsystems: internal tank monitoring, fertilizer distribution, water distribution, and moisture sensing. You are currently viewing the moisture sensing subsection. The other sections are available via the team report. One thing to remember about this project was created for teams in a school based environment to learn simple electronics and practice embedded software development.</li> </ul>","tags":["tag1","tag2"]},{"location":"#my-contribution","title":"My Contribution","text":"<ul> <li>To review the overarching diagram relating to the subsection, please visit the \"Block Diagram\" section of the database.</li> <li>To review the details regarding the components used to construct the subsection, you can review it in the \"Component Selection\" section of the database.</li> <li>To review the final selection as well as the number of parts please visit the \"BOM\" section of the datasheet.</li> <li>To review the schematic, please visit the \"Schematic\" section of the database.</li> <li>To review the details regarding power consumption, please visit the \"Power Budget\" section of the database.</li> <li>To review the pcb, please visit the \"PCB\" section of the database.</li> <li>To review the code, please visit the \"MPLAB code\" section of the database.</li> <li>To review future steps, please visit the \"Hardware V2.0\" section of the database.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/","title":"Individual Block Diagram","text":"","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#overview","title":"Overview","text":"<p>This block diagram is part of a larger machine but still is able to work on its own to measure moisture. Two power levels are required which can be derived from the same 9v 3a power supply. This can supply power to both the motor at 12v levels (combined at the H-Bridge #FAN8100N) and the second power level is a 5v 1a which is obtained through the Voltage regulator (#L7805CV). This allows the Curiosity Nano to function at its desired power levels. This also enables sensing from the two limit switches (463093691402) and the capacitive sensor due to their operating ranges. Finally the h-Bridge, part number aforementioned, controls the motor (711) which will help keep the capacitive sensor safe when not actively reading values. Otherwise Pins that are being utilized help the curiosity nano communicate with the central hub nano for this team project.</p> <p>Parts List for sensors and actuators that are involved in the diagram. Are available as a list here and with all the other options in Component Selection. For the final choices and the amounts please visit the \"BOM\" section of the datasheet.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#individual-block-diagram","title":"Individual Block Diagram","text":"","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#project-verification","title":"Project Verification","text":"<p>This project has a number of requirements for both the team and the individual in order to be marked as a success.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#individual-subsystem-requirements","title":"Individual Subsystem Requirements","text":"<ul> <li>A 5V Linear Regulator</li> <li>Barrel Jack adapter for your 9V power supply</li> <li>A pre-selected microcontroller: a Microchip PIC18F57Q43 Curiosity Nano Development Board</li> <li>At least one distinct sensing or actuation functionality (four functionalities would be required across a four-person team)</li> <li>While individual modules are expected to have either sensing or actuation functionality as a minimum, there is an expectation that a mix of both sensing and actuation functionalities will be present when all the team modules are connected together.</li> <li>It is not permitted to replicate subsystem functionality within a team, or copy a classmate's design. Subsystems must be materially different, using different chips, design processes, and accomplishing different functions.</li> <li>Individual subsystems are required to connect to teammates' boards using the connector listed above. It is up to the team to determine what information to pass and to whom, but individuals will be required to demonstrate basic connectivity and data passing capabilities before being able to connect their device to their team's connectors.</li> </ul> <p>These traits can be seen in the block diagram for the individual subsection. On the bottom right of the block diagram we can see the 9V 3A Power supply which connects with the second bullet point. The barrel jack isn't placed on the block diagram as a block because that is a lower level detail that is covered by the higher details of voltage and amperage. Moving up directly from there we can find the 5V 1.5A voltage regulator and this part is a linear voltage regulator completing the first bullet point of requirements. This helps ensure that we have the correct level of power for the pre-selected microcontroller (top left to top center). In the case of this subsystem we have a distinct moisture sensing component which combines information in the other subsystems to tell the main controller whether or not to turn on a pump. Secondarily to ensure we meet sensing/actuation requirements the block diagram shows a motor as well as limit switches. These limit switches help control the range the motor operates in so that the motor can operate in a safe manner in relation to the moisture sensor. Finally returning to the bottom but this time on the left we can see the 8 pin connector used to communicate in between boards. Allowing for the final requirement to be seen through the jumper pin array as well as the direct connections to the micro controller.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#additional-file-types","title":"Additional File Types","text":"<p>This block diagram is available on as a draw io file and it can be found in pdf form here and finally the combined files can be found \"as a zip file.\"</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/","title":"Component Selection","text":"<p>The purpose of this section is to highlight various solutions for the components used in the subsystem and identify the choices that will best suit this project.</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#components","title":"Components","text":"","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#motor-driver","title":"Motor Driver","text":"<ol> <li> <p>Brush DC Motor Controller</p> <p></p> <ul> <li>$0.96/each</li> <li>FAN8100N</li> </ul> Pros Cons Known specs for size, power, and pins Cannot modify pin positions. Easy-to-replicate footprint Backup difficult if internal circuit fails. Stands out on PCB canvas Depends on motor type for it to be effective. Allows for forward and reverse signals Doesn\u2019t need PWM signal </li> <li> <p>Use a motor that doesn\u2019t need a motor driver</p> <ul> <li>Price: N/A</li> <li>This is an option due to the built in ways to manage a motor without a motor driver so we'd be remiss to not at least include the option.</li> </ul> Pros Cons Eliminates one component Forces PWM signals or encoder for control May remove need for a limit switch Requires motor constant tuning Reduces PCB failure points May need voltage amplification circuit </li> <li> <p>DRV8874 Single Motor Driver</p> <p></p> <ul> <li>$11.94/each</li> <li>4035</li> </ul> Pros Cons Built-in electrical protection = Breaks project rule: no daughter boards Plug-and-play on breadboard Needs extra male pin connectors to attach Supports PWM and H-Bridge control </li> </ol> <p>Choice: Option 1: Brush DC Motor Controller Rationale: Even though it adds a component, it follows project specifications and helps ensure the mechanical testing of the motor part. It doesn't hurt that there is a secondary integrated circuit for potential mishaps. Also the unique footprint of the through-hole option helps create an easier design assembly. As an added benefit the team knows how to use this particular component in order to drive a similar motor which will help in testing the overall system. It also removes a limit on the potential motor options and if the motor chosen later doesn't require one then we can change to Option 2. (Spoiler the motor chosen uses this.)</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#voltage-regulator","title":"Voltage Regulator","text":"<ol> <li> <p>Resistors in series</p> <p></p> <ul> <li>Price: N/A given unspecified resistor choices</li> <li>Potential Resistor Selection kit for reference</li> </ul> Pros Cons Can limit voltage Voltage output varies with current draw Parallel configuration can alter current Cannot change current and voltage simultaneously Compact placement near PCB face Requires more space than regulators Fault-tolerant due to redundancy Troubleshooting is difficult </li> <li> <p>Linear Voltage Regulator IC Positive Fixed 1 Output</p> <p></p> <ul> <li>$0.50/each</li> <li>L7805CV</li> </ul> Pros Cons Already provided Limited to 1.5A current (some needs are 3A) Well-understood by team Requires planning for voltage output Supports additional heat-sinks Can't automatically adjust input to 5V output Example circuit available Tested across various circuits </li> <li> <p>Buck Boost Switching Regulator IC Positive or Negative Adjustable</p> <p></p> <ul> <li>$0.72/each</li> <li>MC34063ADR</li> </ul> Pros Cons Adjustable output voltage Max current output is 1.5A Wide input range (3V\u201340V) Currently unfamiliar to team Design equations provided Larger footprint than L7805CV Can be surface or through-hole mounted </li> </ol> <p>Choice: Option 2: Linear Voltage Regulator IC Positive Fixed 1 Output Rationale: A linear voltage regulator is a clean solution to help get the power down from a higher voltage and amperage to the voltage we need for parts of this sub-system. In turn this one allows for an additional heat sink attachment if required to help prevent dangerous conditions and enable long-term use. While the price point isn't that much different from a switching regulator the ease of integration into the circuit elevates this option over the others. Also the consistency of this option promotes it over using a line of resistors.</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#motor","title":"Motor","text":"<ol> <li> <p>DC Motor Gearmotor 251 RPM Incremental</p> <p></p> <ul> <li>$16.50/each</li> <li>FIT0186</li> </ul> Pros Cons High stall current &amp; Max Operating voltage Requires several control pins Includes encoder Software control needed, not easy to simulate No external software for encoder needed Hard to secure due to cylindrical shape </li> <li> <p>DC Motor Standard 9100 RPM 6VDC</p> <p></p> <ul> <li>$1.95/each</li> <li>711</li> </ul> Pros Cons Works with predefined track No position feedback Flat side helps control torque output Requires external bound control Compact, easy to secure Rated 4.5\u20139V, slightly over 5V limit Lightweight Lower torque Mechanically simulative Flexible mounting options </li> <li> <p>Positional Rotation DC Motor Servomotor, RC (Hobby) Incremental 4.8VDC</p> <p></p> <ul> <li>$3.62/each</li> <li>SER0006</li> </ul> Pros Cons Rectangular shape for better torque transfer Requires homing and configuration Has incremental encoder Needs PWM (extra wire) Rated at 4.8V DC Cannot be simulated mechanically High torque No motor controller needed </li> </ol> <p>Choice: Option 2: DC Motor Standard 9100 RPM 6VDC Rationale: While it does have a lowered torque this acts as a safety feature for both the user and the plant in case the moisture sensor is misaligned. Also the flat sides on the housing of the motor allow for a brace to be installed in order to ensure the motor doesn't just spin. An added benefit of not having an encoder is a reduction in the wires that need to be connected directly to the motor. Reducing the amount of wires that would be exposed to the user's environment and needed to be searched to debug errors with the motor. Its size also helps the keep the housing smaller and doesn't force the team to come up with a clever way to hide it or to prevent damage over a larger surface.</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#limit-switch","title":"Limit Switch","text":"<ol> <li> <p>Switch Tactile SPST-NO 0.05A 12V</p> <p></p> <ul> <li>$0.10/each</li> <li>TS02-66-60-BK-160-LCR-D</li> </ul> Pros Cons Small outline Not easily mounted Doesn\u2019t require a lot of power Could require a secondary breadboard area to mount Signals can be in parallel Small sensing area More force than a traditional limit switch Hard to see limit is found Target surface may move without mechanical support </li> <li> <p>Switch Snap Action SPDT</p> <p></p> <ul> <li>$1.35/each</li> <li>MS0850502F030P1A</li> </ul> Pros Cons Through hole mounting Relatively large Doesn\u2019t need PCB connection directly (can wire connect) Needs support if at the end of actuator range Three states, but only two pins required Acts parallel to placement 50k+ operation lifespan </li> <li> <p>Limit Switch SPDT 3A 125V</p> <p></p> <ul> <li>$4.00/each</li> <li>463093691402</li> </ul> Pros Cons Thinner than other options Bent pin mounts Circle likely catches movement better than straight bar Pin connection extends past part width Can be mounted away from PCB Three states, but only two pins required Through hole mounting </li> </ol> <p>Choice: Option 3: Limit Switch SPDT 3A 125V Rationale: This limit switch is rated for the maximum power supply current and for a higher voltage than the project will be using. It's useful in ensuring the motor doesn't go too far and making it so the moisture sensor won't corrode by being in the soil for long periods of time. This particular option is better than the rest due to the smaller size and mounting options. Since it is smaller we won't need as powerful a motor to move the prismatic joint and other components at the end toward the plant. Secondarily, the cylindrical element at the end can create a depression in the soil which will have even more resistance to being moved and will help the actuation of the switch part of the component.</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#moisture-sensor","title":"Moisture Sensor","text":"<ol> <li> <p>Handmade Resistive check using nails</p> <ul> <li>Item is not commercially available.</li> </ul> Pros Cons No daughter board needed Materials degrade over time Easy soil removal Readings may be biased by soil chemistry Reading handled in software Very dry soil might not register Modular parts for easy repair Theoretical op-amp dependence unclear </li> <li> <p>Moisture Sensor Evaluation Board</p> </li> </ol> <p></p> <ul> <li>$7.95/each</li> <li>13637</li> </ul> Pros Cons Easy to extend to probe Is a daughter board \u2013 violates requirements Prebuilt, screw terminals Large probes can harm plants Consumer-friendly design potential Logic integration reduces student learning opportunity Reaches deeper into soil <ol> <li>VH400 Soil Moisture Sensor</li> </ol> <p></p> <ul> <li>$44.95/each</li> <li>VH400</li> </ul> Pros Cons Wide input voltage range Likely includes daughter board (violation) Low current use (&lt;13mA) Probe may not fit pots or harm roots Quick sampling (can be toggled on/off) Not available from reputable sellers Unaffected by salt/fertilizer Usable in hydroponics Long-lasting corrosion-resistant design <p>Choice: Option 1: Handmade resistive check using nails Rationale: This option forces the student team to delve into how electricity is transferred through space. This also follows the project specifications of not having a daughter board component. Unfortunately, for the accuracy due to soil chemistry that is the best option due to majority of moisture sensors needing a daughter board of some kind in order to function.</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#op-amp","title":"Op-Amp","text":"<ol> <li> <p>Rail-to-Rail Single Supply Op-Amp</p> <p></p> <ul> <li>$0.50/each</li> <li>MCP6002-E/P</li> </ul> Pros Cons Inexpensive to purchase Lost of extra outputs Familiar package Low bandwidth (1 MHz) Operates in our range Satisfies project requirements </li> <li> <p>IC OPAMP GP 2 CIRCUIT 8SOIC</p> <p></p> <ul> <li>$0.23/each</li> <li>LM358ADR</li> </ul> Pros Cons Very inexpensive to purchase Unfamiliar package Fits in project requirements Only one backup piece Surface mount </li> <li> <p>IC CMPS 4 Circuit 14DIP</p> <p></p> <ul> <li>$3.64/each</li> <li>LMC6484IN/NOPB</li> </ul> Pros Cons Through hole mounting Limited backup options Designed for a wide voltage range More expensive for an op-amp </li> </ol> <p>Choice: Option #1: Rail-to-Rail Single Supply Op-Amp Rationale:  This option allows for rapid integration into the project and supplies itself with multiple backups in case the need arises. This allows enables for some damage to occur during shipping. All while having the additional benefit of boosting the signal from the moisture sensor to help ensure the nano can actually read it.</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#final-selection-table","title":"Final Selection Table","text":"Function Part Name Motor Driver FAN8100N Voltage Regulator L7805CV Motor 711 Moisture Sensor Hand-made using two conductive materials connected across a 1 inch gap. Op amp MCP6002-E/P","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#power-budget","title":"Power Budget","text":"<p>After all of our components have been selected we need to ensure that we have enough power to actually complete the subsection as we have designed it. Otherwise, we'll need to find a new or a secondary power source or we'll need to choose different components.</p> <p>This information can be found at the Power Budget tab</p>","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/#microcontroller-subsystems","title":"Microcontroller subsystems","text":"<p>In order to prevent confusion later on, we will include some information from the \"Block Diagram tab.\" More specifically the information regarding which microcontroller subsystems.</p> Subsystem Pins ADCC RA0, RD1 DAC RA2 GPIO RB0, RB5, RB6, RD5, RD6, RD7, RF3 <p></p>","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/","title":"Bill of Materials","text":"","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/#overview","title":"Overview","text":"<p>Up until this point, we have been working mainly in the theoretical realm to choose parts and isolate a good design. However, now that we have our components we can pull together the price of the project in the real world rather than as a concept.</p> Part Name/Description Qty Unit Cost Total Cost Manufacture Manufacturer # Vendor Link Datasheet Link Schematic Reference Designators 2 Position Wire Screw Terminal 10 0.40 $4.00 Same Sky TB002-500-02BE Digikey Datasheet S1, S2, M1 9V 3.0A AC Adapter Switching Mode Power Supply Cable 1 4.52 $4.52 BestCH Amazon Unavailable J9 Brush Dc Motor controller 1 1.16 $1.16 Fairchild Semiconductor FAN8100N Digikey Datasheet U2 Connector Receptacle 8POS 2x4 1 0.16 0.169 Assmann WSW Components A 08-LC-TT Digikey Datasheet J12 Conn Power Jack 2x5.5 mm 1 0.76 $0.76 Same Sky PJ-102AH Digikey Datasheet J9 Curiosity Nano 1 9.99 $9.99 Microchip PIC18F57Q43 Microchip Datasheet U3 DC Motor Standard 9100 RPM 1 1.95 $1.95 Adafruit Industries 711 Digikey Datasheet M1 DIODE STANDARD 1000V 1A DO41 1 0.11 $0.11 Micro Commercial Components 1N4007-TP Digikey Datasheet D2 Double Sided Male Pin Headers 23 0.56 $22.4 Sullins Connector Solutions PREC040SABN-RC Digikey Datasheet J(1-4, 6, 8, 10, 11, 13-23, 25-28) FUSE GLASS .8A 1 0.72 $0.72 Keystone Electronics 4628 Digikey Datasheet F1 Fuse Holder 5 A 1 0.56 $0.56 Littelfuse Inc 0235003.MXP Digikey Datasheet F1 Galvanized nails 2 0.10 $0.20 Everbilt 803444 Home Depot Not Applicable U3 IC Op AMP Gp 1 0.50 $0.50 Microchip Technology MCP6002 Digikey Datasheet U4 IC Reg Linear 5V 1.5A 1 0.50 $0.50 STMicroelectronics L7805CV Digikey Datasheet U1 LED Blue Diffused 5MM Round 1 0.24 $0.24 Wurth Elektronik 151051BS04000 Digikey datasheet D1 Non Polar Capacitor (.1uf) 7 0.24 $2.16 Vishay K104K10X7RF5UH5 Digikey datasheet C2-8 Non Polar Capacitor (.33uf) 1 0.44 $0.44 Kemet C322C334M5U5TA Digikey datasheet c1 PC Accessories 8 Inches 20cm 2x4 8P IDC 1 3.85 $3.85 Mariv International K2808-8P20cm-FF-4PK Amazon Not Provided J12 SHUNT 2.54 mm Pitch 4 0.14 $0.56 Adam Tech MSC-G Digikey Datasheet J(5, 7, 24, 29, 30) Switch Limit SPDT 3A 2 4.00 $8.00 Wurth Elektronik 463093691402 Digikey Datasheet S2, S3 Tactile Switch SPST-NO Top Actuated 1 0.10 $0.10 Same Sky TS02-66-60-BK-160-LCR-D Digikey Datasheet S1 Various Resistors (11) 1 9.99 $9.99 Elegoo EL-CK-004 Amazon Not Provided R1-13 <p>At the end the total price of the project is $72.77 for all parts including back ups.</p>","tags":["tag1","tag2"]},{"location":"04-Schematic/schematic/","title":"Schematic","text":"","tags":["tag1","tag2"]},{"location":"04-Schematic/schematic/#overview","title":"Overview","text":"<p>This schematic is design to support a motor that can move an arm to the limit switch in order to read the moisture of the soil. Through a 9v 3A power supply that is stepped down to a 5V 1A output. This secondary voltage is able to be used by the curiosity nano.</p> <p></p> <p>Figure #1: The full schematic.  </p> <p></p> <p>Figure #2: Closer view on the nano portion.  </p> <p></p> <p>Figure #3: Closer view on the debugging button schematic.  </p> <p></p> <p>Figure #4: The ribbon cable in the schematic.  </p>","tags":["tag1","tag2"]},{"location":"04-Schematic/schematic/#resources","title":"Resources","text":"<p>The schematic is available as a pdf file, and the project is available as a zip folder.</p> <p>For the PCB elements please visit the \"PCB\" section of the document.</p>","tags":["tag1","tag2"]},{"location":"05-Power-Budget/Power-Budget/","title":"Power Budget","text":"","tags":["tag1","tag2"]},{"location":"05-Power-Budget/Power-Budget/#overview","title":"Overview","text":"<p>After selecting components in Component Selection we needed to ensure that the subsection would have the power it needs with the added requirement of a safety margin. Therefore, we took the active components, meaning we excluded switches and passive components, and ensured our power supply as well as our regulators were able to get the power needed. The specifications for each piece came from their datasheet except in the case of the motor where it will only get power through the motor driver so it has different tolerances.</p> <p></p> <p></p>","tags":["tag1","tag2"]},{"location":"05-Power-Budget/Power-Budget/#conclusions","title":"Conclusions","text":"<p>A single barrel jack port that is delivering 9V and 3A into the system is sufficient for the needs of the subsystem. If needed we have some power left over that we could add some new features after getting client feedback. However, we do not need the full 3A capabilities and could get away with around .8A going through a fuse into the system.</p>","tags":["tag1","tag2"]},{"location":"05-Power-Budget/Power-Budget/#resources","title":"Resources","text":"<p>The power budget is available in other forms such as a pdf version, and as a Microsoft Excel Sheet.</p>","tags":["tag1","tag2"]},{"location":"06-PCB/pcb/","title":"PCB","text":"","tags":["tag1","tag2"]},{"location":"06-PCB/pcb/#images","title":"Images","text":"<p>Figure 1: Top view of the PCB.</p> <p> </p> <p>Figure 2: Bottom view of the PCB.</p> <p>From those trace connections we can also build a simulation of it using the integrated Cadence software.</p> <p> </p> <p>Figure 3: Top prediction of the PCB with the dark rectangular prisms being various parts.</p> <p> </p> <p>Figure 4: Bottom prediction of the PCB without solder coverage.</p> <p>After simulating the PCB, we can look towards manufacturing at least one PCB for real world usage.</p> <p> </p> <p>Figure 5: Top of the PCB without any parts soldered on.</p> <p> </p> <p>Figure 6: Bottom of the PCB without any parts soldered on.</p> <p> </p> <p>Figure 7: Top of the PCB after being built.</p> <p> </p> <p>Figure 8: Bottom of the PCB after being built.</p>","tags":["tag1","tag2"]},{"location":"06-PCB/pcb/#resources","title":"Resources","text":"<p>PDF versions of the \"Top view\", \"Bottom view\", and the \"Manufacturing zip files\" are available for your leisure. For the full project please get the zip file at the bottom of the \"Schematic\" section of the database. Otherwise you can get the \"zip files here.\"</p>","tags":["tag1","tag2"]},{"location":"07-Code/mplabCode/","title":"MicroController Code","text":"","tags":["tag1","tag2"]},{"location":"07-Code/mplabCode/#overview","title":"Overview","text":"<p>After creating the schematic and manufacturing the PCB we now have the opportunity to code. For that we are going to use MPLAB X V5.45. </p> <pre><code>#include \"mcc_generated_files/mcc.h\"\n\nvoid lowerMotor(void);\nvoid raiseMotor(void);\n\n/*\n                    lowerMotor process*/\nvoid lowerMotor(void){\n    while(limit_f_GetValue() == 0){\n        if(move_f_GetValue() != 1){ // if it's already set we don't need to set it again\n            move_f_SetHigh(); \n        }\n        __delay_ms(10);\n    }\n    move_f_SetLow();\n}\n\nvoid raiseMotor(void){\n    while(limit_r_GetValue() == 0){\n        if(move_r_GetValue()!= 1){\n            move_r_SetHigh();\n        }\n        __delay_ms(10);\n    }\n    move_r_SetLow();\n}\n\nvoid main(void)\n{\n    // Initialize the device\n    SYSTEM_Initialize();\n\n    //initalize adcc\n    ADCC_Initialize();\n    //initalize dac\n    DAC1_Initialize();\n    // start all gpio\n    PIN_MANAGER_Initialize();\n\n    uint16_t conversionResult;\n    //led_Toggle();\n    //__delay_ms(1000);\n\n    bool processDone = true;\n\n    if(limit_r_GetValue() == 0){\n            raiseMotor();\n        }\n\n    while (1)\n    {\n        // Add your application code\n        // check if request is high\n            //if so do rest\n            /*\n             send processing signal high\n             * Start motor forward.\n             * Wait till limit switch forward is hit.\n             * Stop motor movement\n             * Read ADCC\n             * Write DAC\n             * Set processing Low\n             * wait till request is low\n             * set processing high\n             * Reverse motor start\n             * Wait till limit switch is hit\n             * Stop motor\n             * Wait till request is high again\n             */\n        led_SetHigh();\n\n        processDone == true; // set it to true so I can simulate it for checkoff\n\n        if((request_GetValue() == 1) &amp;&amp; (processDone == true)){ // this checks if it is high\n\n            if(limit_f_GetValue() == 0){\n                led_SetLow();\n                process_SetHigh();\n                lowerMotor(); // we do technically get stuck here until the motor is down but at least its sampling every couple ms\n            }\n            ADCC_StartConversion(moistureIn);\n\n            while(!ADCC_IsConversionDone()){ // not sure what to do to not wait on this.\n\n            }\n\n            conversionResult = ADCC_GetConversionResult();\n            DAC1_SetOutput((uint8_t)conversionResult);\n\n            process_SetLow(); // we can keep setting low\n            led_SetHigh();\n            processDone = false;\n        }\n\n\n        if((request_GetValue() == 0) &amp;&amp; (processDone == false)){\n        led_SetLow();\n        process_SetHigh();\n\n            if(limit_r_GetValue() == 0){\n                raiseMotor();\n            }\n            process_SetLow();\n            led_SetHigh();\n            processDone = true;\n        }\n\n    }\n}\n</code></pre> <p>It can also be found as \"a zip file for individual verification\" and as it stands we have a \"complete system code version.\" </p>","tags":["tag1","tag2"]},{"location":"08-Hardware/hardware/","title":"Hardware V2.0","text":"","tags":["tag1","tag2"]},{"location":"08-Hardware/hardware/#alterations-looking-forward","title":"Alterations Looking Forward","text":"<p>While for some the schematic can appear confusing, we can use that as a starting point for things that might be done differently. As one of the major issues during testing was ensuring that the Op-amp worked as it was designed. This was because the teaching team for 304 works better with a pictographic representation of the Op-amp. Unfortunately, this would have also increased complexity in the pcb and therefore, increased the likely hood of footprints not matching real parts. However, in the schematic having the pictographic format would help communicate an idea as opposed to the balance of a part. As for PCB design one element I'd definitely work on would be where I was placing the screw terminals. As when I was building it I realized I made a grave error when predicting how the footprints would interact with the parts. Specifically I made it so the screw terminals were facing into other parts because my brain got trapped in their free roaming position in the schematic. Thankfully I had screwed up a little bit on the footprint of another piece and was able to get everything to fit but it was not an ideal solution. Therefore, double checking the footprints as well as placing anything that needs later attachments at easy to reach positions would be key parts of my next version for this project.</p>","tags":["tag1","tag2"]},{"location":"08-Hardware/hardware/#utilizing-footprints-from-manufacturer","title":"Utilizing Footprints From Manufacturer","text":"<p>One thing that I noticed with this project is that the EGR 304 teaching team wanted us to create our own footprints for parts. However, places like Digikey contain the footprint and the datasheet for a part. This means that I could have ensured my footprint was correct either through an additional validation step or through utilization of the developers footprint. This would have helped with the FAN8100N footprint due to the difference between pins and the fan piece. With that said it was a good learning tool in Cadence and forced me to figure out some more parts of the software.</p>","tags":["tag1","tag2"]},{"location":"Appendix/","title":"Appendix - Main Page","text":"<p>The Appendix is where supporting information goes that is not in the main body. However, it is currently a placeholder as all information is available in the main documents.</p>"},{"location":"Resources/resources/","title":"Resources","text":"","tags":["tag1","tag2"]},{"location":"Resources/resources/#available-zips","title":"Available Zips","text":"<p>| Section Name | Zip File | | Cadence Project | Schematic and PCB | | PCB Files | Gerber files | | MPLab Project | Code files |</p> <p>At this time there are no 3d printed parts for the motor available. They were in development but did not get to be tested due to the project timeline.</p>","tags":["tag1","tag2"]}]}